<metroControls:MetroWindow x:Class="Toadman.GameLauncher.Client.GameLibraryView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Toadman.GameLauncher.Client"
        xmlns:core="clr-namespace:Toadman.GameLauncher.Core;assembly=Toadman.GameLauncher.Core"
        xmlns:metroControls="http://metro.mahapps.com/winfx/xaml/controls"
        mc:Ignorable="d"
        UseLayoutRounding="True"
        BorderThickness="1"
        GlowBrush="Black"
        NonActiveGlowBrush="Black"
        Icon="../../Resources/icons/ToadmanIcon48.png"
        WindowStartupLocation="CenterScreen"
        TitleCaps="False"
        Title="{Binding Path=Title}"       
        FontFamily="/ToadmanLauncher;component/Resources/#Comfortaa"
        TitleForeground="White"
        MinHeight="650" MinWidth="950"
        Height="650" Width="950">

    <metroControls:MetroWindow.Resources>
        <local:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
        <local:ValueToVisibilityConverter x:Key="ValueToVisibilityConverter"/>
        <local:IdlenessPhaseToBoolConverter x:Key="IdlenessPhaseToBoolConverter"/>
        <local:PhaseToProgressBarVisibilityConverter x:Key="PhaseToProgressBarVisibilityConverter"/>
        <local:ProcessingPhaseToCaptionConverter x:Key="ProcessingPhaseToCaptionConverter"/>
        <local:SizeFormatConverter x:Key="SizeFormatConverter" />
        <local:PriceToStringConverter x:Key="PriceToStringConverter"/>
        <local:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <local:CountToVisibilityConverter x:Key="CountToVisibilityConverter"/>
        <local:BoolToVisibilityInverseConverter x:Key="BoolToVisibilityInverseConverter"/>
        <local:GameInstallStatusTemplateSelector x:Key="GameInstallStatusTemplateSelector">
            <local:GameInstallStatusTemplateSelector.NotPurchasedTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition Height="50" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="250"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel  Grid.Column="1"
                            Orientation="Vertical">
                            <Button
                                Grid.Column="1"
                                Foreground="White" 
                                VerticalAlignment="Top"
                                Command="{Binding Path=PurchaseCommand}"
                                Style="{DynamicResource GreenButtonStyle}"
                                HorizontalAlignment="Stretch"
                                Cursor="Hand">
                                <TextBlock>
                                    <Run Text="{DynamicResource header_Purchase}" /> 
                                    <Run>for</Run> 
                                    <Run Text="{Binding Path=Model.Price, Converter={StaticResource PriceToStringConverter}, Mode=OneWay}"/>
                                </TextBlock>
                            </Button>
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </local:GameInstallStatusTemplateSelector.NotPurchasedTemplate>
            <local:GameInstallStatusTemplateSelector.NotInstalledTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition Height="35" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="250"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel  Grid.Column="1"
                            Orientation="Vertical">
                            <Button
                                Foreground="White"
                                VerticalAlignment="Top"
                                Content="{DynamicResource header_Install}"
                                Command="{Binding Path=InstallCommand}"
                                Style="{DynamicResource BlueButtonStyle}"
                                HorizontalAlignment="Stretch"
                                Cursor="Hand"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Orientation="Vertical">
                                    <!--DownloadSize-->
                                    <StackPanel 
                                        Margin="0,10,0,0"
                                        ToolTip="{DynamicResource header_GameDownloadSize}"
	                                    VerticalAlignment="Top"
	                                    DockPanel.Dock="Left"
	                                    Orientation="Horizontal">
                                        <Viewbox Width="14" Height="14" Margin="0,0,5,0">
                                            <Path
			                                Data="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" 
			                                Fill="Ivory"/>
                                        </Viewbox>

                                        <TextBlock 
                                            Margin="0,4,0,0"
                                            Style="{DynamicResource CaptionTextStyle}"
                                            Text="{Binding Path=Model.DownloadSize, Converter={StaticResource SizeFormatConverter}}"/>
                                    </StackPanel>
                                    <!--InstallationSize-->
                                    <StackPanel 
                                        ToolTip="{DynamicResource header_GameTotalSize}"
	                                    VerticalAlignment="Top"
	                                    DockPanel.Dock="Left"
                                        Margin="0,5,0,0"
	                                    Orientation="Horizontal">
                                        <Viewbox Width="14" Height="14"  Margin="0,0,5,0">
                                            <Path
			                                Data="M12,3C7.58,3 4,4.79 4,7C4,9.21 7.58,11 12,11C16.42,11 20,9.21 20,7C20,4.79 16.42,3 12,3M4,9V12C4,14.21 7.58,16 12,16C16.42,16 20,14.21 20,12V9C20,11.21 16.42,13 12,13C7.58,13 4,11.21 4,9M4,14V17C4,19.21 7.58,21 12,21C16.42,21 20,19.21 20,17V14C20,16.21 16.42,18 12,18C7.58,18 4,16.21 4,14Z" 
			                                Fill="Ivory"/>
                                        </Viewbox>

                                        <TextBlock
                                            Margin="0,4,0,0"
                                            FontSize="12"
                                            Style="{DynamicResource CaptionTextStyle}"
                                            Text="{Binding Path=Model.InstallationSize, Converter={StaticResource SizeFormatConverter}}"/>
                                    </StackPanel>

                                    <!--SwitchBranch-->
                                    <StackPanel 
                                        Cursor="Hand"
                                        Margin="0,5,0,0"
	                                    Visibility="{Binding Path=SwitchBranchVisibility}"
	                                    VerticalAlignment="Top"
	                                    DockPanel.Dock="Left"
	                                    Orientation="Horizontal">

                                        <Viewbox Width="16" Height="16">
                                            <Path
			                                Data="M13,14C9.64,14 8.54,15.35 8.18,16.24C9.25,16.7 10,17.76 10,19A3,3 0 0,1 7,22A3,3 0 0,1 4,19C4,17.69 4.83,16.58 6,16.17V7.83C4.83,7.42 4,6.31 4,5A3,3 0 0,1 7,2A3,3 0 0,1 10,5C10,6.31 9.17,7.42 8,7.83V13.12C8.88,12.47 10.16,12 12,12C14.67,12 15.56,10.66 15.85,9.77C14.77,9.32 14,8.25 14,7A3,3 0 0,1 17,4A3,3 0 0,1 20,7C20,8.34 19.12,9.5 17.91,9.86C17.65,11.29 16.68,14 13,14M7,18A1,1 0 0,0 6,19A1,1 0 0,0 7,20A1,1 0 0,0 8,19A1,1 0 0,0 7,18M7,4A1,1 0 0,0 6,5A1,1 0 0,0 7,6A1,1 0 0,0 8,5A1,1 0 0,0 7,4M17,6A1,1 0 0,0 16,7A1,1 0 0,0 17,8A1,1 0 0,0 18,7A1,1 0 0,0 17,6Z" 
			                                Fill="Ivory"/>
                                        </Viewbox>

                                        <Button Grid.Row="6" 
		                                    Content="{Binding Path=Model.CurrentBranchName}"
		                                    Command="{Binding Path=SwitchBranchCommand}"
                                            ToolTip="{DynamicResource toolTip_button_SwitchBranch}"
		                                    Style="{StaticResource LinkButtonStyle}" 
		                                    Margin="5,4,0,0"
		                                    Foreground="#FFC9C9C9" 
		                                    FontSize="12"
		                                    HorizontalAlignment="Center" 
		                                    VerticalAlignment="Top"/>

                                        <StackPanel.Style>
                                            <Style TargetType="StackPanel">
                                                <Setter Property="Opacity" Value="0.75" />
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="true">
                                                        <Setter Property="Opacity" Value="1" />
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </StackPanel.Style>
                                    </StackPanel>
                                </StackPanel>

                                <metroControls:DropDownButton  
                                    Margin="0,10,0,0"
                                    Grid.Column="1"
                                    ItemsSource="{Binding Path=OptionActions}"
					                Cursor="Hand"
                                    Foreground="#FFC9C9C9" 
                                    DockPanel.Dock="Right"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    ArrowVisibility="Collapsed"
					                DisplayMemberPath="Title"
					                ToolTip="Game options..." 
                                    VerticalContentAlignment="Top"
                                    VerticalAlignment="Top"
                                    HorizontalAlignment="Right">
                                    <metroControls:DropDownButton.ButtonStyle>
                                        <Style TargetType="{x:Type Button}" BasedOn="{StaticResource CustomDropDownButtonStyle}" />
                                    </metroControls:DropDownButton.ButtonStyle>
                                    <metroControls:DropDownButton.Icon>
                                        <Viewbox 
							                Height="15"
                                            Margin="0,2,0,0"
							                Stretch="Uniform">
                                            <ContentControl Focusable="False">
                                                <StackPanel Orientation="Horizontal">
                                                    <Path 
									                    Width="11" 
									                    Height="11" 
                                                        Margin="0,0,5,0"
									                    Stretch="Fill" 
									                    Fill="Ivory" 
									                    Data="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                                                    <TextBlock
                                                        FontFamily="/ToadmanLauncher;component/Resources/#Comfortaa"
                                                        Margin="0,2,0,0"
                                                        Text="Game options"/>
                                                </StackPanel>
                                            </ContentControl>
                                        </Viewbox>
                                    </metroControls:DropDownButton.Icon>
                                </metroControls:DropDownButton>
                            </Grid>
                        </StackPanel>

                        <Grid Grid.Row="1" Grid.ColumnSpan="2"
                            Visibility="{Binding Path=Model.ProcessingPhase, Converter={StaticResource PhaseToProgressBarVisibilityConverter}}">

                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition Height="15" />
                            </Grid.RowDefinitions>

                            <DockPanel>
                                <TextBlock 
                                    Foreground="White"
                                    FontSize="13"
                                    VerticalAlignment="Center" 
                                    HorizontalAlignment="Right"
                                    FontFamily="/ToadmanLauncher;component/Resources/#UbuntuMono"
                                    Text="{Binding Path=Model.ProcessingPhase, Converter={StaticResource ProcessingPhaseToCaptionConverter}}"/>
                                <TextBlock 
                                    Foreground="White"
                                    FontSize="13"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    FontFamily="/ToadmanLauncher;component/Resources/#UbuntuMono"
                                    Margin="10,0,0,0">
                                    <TextBlock.Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.Downloading}">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.Decompressing}">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                    <Run Text="{Binding Path=ByteProgress, Converter={StaticResource SizeFormatConverter}}"/> / <Run Text="{Binding Path=ByteProgressMax, Converter={StaticResource SizeFormatConverter}}"/> <Run Text="{Binding Path=EstimatedTime}"/>
                                </TextBlock>

                                <!--install cancellation button-->
                                <Button
                                    Cursor="Hand"
                                    HorizontalAlignment="Right"
                                    Grid.Column="1"
                                    Width="15"
                                    Height="15"
                                    Style="{DynamicResource ChromelessButtonStyle}"
                                    Command="{Binding Path=CancelCommand}">
                                    <Path 
                                        Stretch="Fill" 
                                        Fill="#FF30B0F0" 
                                        Data="F1 M 26.9166,22.1667L 37.9999,33.25L 49.0832,22.1668L 53.8332,26.9168L 42.7499,38L 53.8332,49.0834L 49.0833,53.8334L 37.9999,42.75L 26.9166,53.8334L 22.1666,49.0833L 33.25,38L 22.1667,26.9167L 26.9166,22.1667 Z"/>
                                    <Button.ToolTip>
                                        <TextBlock>Cancel</TextBlock>
                                    </Button.ToolTip>
                                </Button>
                            </DockPanel>
                            <ProgressBar
                                Grid.Row="1"
                                Height="6"
			                    VerticalAlignment="Bottom"
                                HorizontalAlignment="Stretch"
			                    Value="{Binding Path=ByteProgress}"
                                Maximum="{Binding Path=ByteProgressMax}"
                                Background="#FF021F3A"
                                BorderThickness="0">
                                <ProgressBar.Foreground>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#FF0080C0" Offset="1"/>
                                        <GradientStop Color="#FF30B0F0"/>
                                    </LinearGradientBrush>
                                </ProgressBar.Foreground>
                                <ProgressBar.Style>
                                    <Style TargetType="{x:Type ProgressBar}">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.Uninstalling}">
                                                <Setter Property="Visibility" Value="Visible"/>
                                                <Setter Property="IsIndeterminate" Value="True"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.FilesIntegrityChecking}">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.Downloading}">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.Decompressing}">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ProgressBar.Style>
                            </ProgressBar>
                        </Grid>
                    </Grid>
                </DataTemplate>
            </local:GameInstallStatusTemplateSelector.NotInstalledTemplate>
            <local:GameInstallStatusTemplateSelector.InstalledTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition Height="35" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition Width="250"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel
                            Grid.Column="1"
                            Orientation="Vertical">
                            <Button
                                Foreground="White" 
                                VerticalAlignment="Top"
                                Content="{Binding Path=HeaderPlay}"
                                Style="{DynamicResource BlueButtonStyle}"
                                Command="{Binding Path=LaunchCommand}"
                                HorizontalAlignment="Stretch"
                                Cursor="Hand"/>

                            <DockPanel
                                Margin="0,10">
                                <StackPanel 
                                    DockPanel.Dock="Left"
                                    Visibility="{Binding Path=SwitchBranchVisibility}"
                                    VerticalAlignment="Top"
                                    
                                    Orientation="Horizontal">

                                    <Viewbox Width="16" Height="16">
                                        <Path
                                            Data="M13,14C9.64,14 8.54,15.35 8.18,16.24C9.25,16.7 10,17.76 10,19A3,3 0 0,1 7,22A3,3 0 0,1 4,19C4,17.69 4.83,16.58 6,16.17V7.83C4.83,7.42 4,6.31 4,5A3,3 0 0,1 7,2A3,3 0 0,1 10,5C10,6.31 9.17,7.42 8,7.83V13.12C8.88,12.47 10.16,12 12,12C14.67,12 15.56,10.66 15.85,9.77C14.77,9.32 14,8.25 14,7A3,3 0 0,1 17,4A3,3 0 0,1 20,7C20,8.34 19.12,9.5 17.91,9.86C17.65,11.29 16.68,14 13,14M7,18A1,1 0 0,0 6,19A1,1 0 0,0 7,20A1,1 0 0,0 8,19A1,1 0 0,0 7,18M7,4A1,1 0 0,0 6,5A1,1 0 0,0 7,6A1,1 0 0,0 8,5A1,1 0 0,0 7,4M17,6A1,1 0 0,0 16,7A1,1 0 0,0 17,8A1,1 0 0,0 18,7A1,1 0 0,0 17,6Z" 
                                            Fill="Ivory"/>
                                    </Viewbox>

                                    <Button Grid.Row="6" 
                                        Cursor="Hand"
                                        Content="{Binding Path=Model.CurrentBranchName}"
                                        Command="{Binding Path=SwitchBranchCommand}"
                                        ToolTip="{DynamicResource toolTip_button_SwitchBranch}"
                                        Style="{StaticResource LinkButtonStyle}" 
                                        Margin="5,4,0,0"
                                        Foreground="#FFC9C9C9" 
                                        FontSize="12"
                                        HorizontalAlignment="Center" 
                                        VerticalAlignment="Top"/>
                                    
                                    <StackPanel.Style>
                                        <Style TargetType="StackPanel">
                                            <Setter Property="Opacity" Value="0.75" />
                                            <Style.Triggers>
                                                <Trigger Property="IsMouseOver" Value="true">
                                                    <Setter Property="Opacity" Value="1" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </StackPanel.Style>
                                </StackPanel>

                                <metroControls:DropDownButton  
                                    ItemsSource="{Binding Path=OptionActions}"
					                Cursor="Hand"
                                    Foreground="#FFC9C9C9" 
                                    DockPanel.Dock="Right"
                                    Background="Transparent"
                                    BorderThickness="0"
                                    ArrowVisibility="Collapsed"
					                DisplayMemberPath="Title"
					                ToolTip="Game options..." 
                                    VerticalContentAlignment="Top"
                                    VerticalAlignment="Top"
                                    HorizontalAlignment="Right">
                                    <metroControls:DropDownButton.ButtonStyle>
                                        <Style TargetType="{x:Type Button}" BasedOn="{StaticResource CustomDropDownButtonStyle}" />
                                    </metroControls:DropDownButton.ButtonStyle>
                                    <metroControls:DropDownButton.Icon>
                                        <Viewbox 
							                Height="15"
                                            Margin="0,2,0,0"
							                Stretch="Uniform">
                                            <ContentControl Focusable="False">
                                                <StackPanel Orientation="Horizontal">
                                                    <Path 
									                    Width="11" 
									                    Height="11" 
                                                        Margin="0,0,5,0"
									                    Stretch="Fill" 
									                    Fill="Ivory" 
									                    Data="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                                                    <TextBlock
                                                        FontFamily="/ToadmanLauncher;component/Resources/#Comfortaa"
                                                        Margin="0,2,0,0"
                                                        Text="Game options"/>
                                                </StackPanel>
                                            </ContentControl>
                                        </Viewbox>
                                    </metroControls:DropDownButton.Icon>
                                </metroControls:DropDownButton>
                            </DockPanel>
                        </StackPanel>

                        <Grid
                            Grid.Row="1"
			                Grid.ColumnSpan="2"
                            Visibility="{Binding Path=Model.ProcessingPhase, Converter={StaticResource PhaseToProgressBarVisibilityConverter}}">

                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition Height="15" />
                            </Grid.RowDefinitions>

                            <DockPanel>
                                <TextBlock 
                                    FontSize="13"
                                    FontFamily="/ToadmanLauncher;component/Resources/#UbuntuMono"
                                    Foreground="White"
                                    VerticalAlignment="Center" 
                                    HorizontalAlignment="Right"
                                    Text="{Binding Path=Model.ProcessingPhase, Converter={StaticResource ProcessingPhaseToCaptionConverter}}"/>
                                <TextBlock 
                                    FontSize="13"
                                    FontFamily="/ToadmanLauncher;component/Resources/#UbuntuMono"
                                    Foreground="White"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center" 
                                    Margin="10,0,0,0">
                                    <TextBlock.Style>
                                        <Style TargetType="{x:Type TextBlock}">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.Downloading}">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.Decompressing}">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                    <Run Text="{Binding Path=ByteProgress, Converter={StaticResource SizeFormatConverter}}"/> / <Run Text="{Binding Path=ByteProgressMax, Converter={StaticResource SizeFormatConverter}}"/>
                                </TextBlock>

                                <!--Update cancellation button-->
                                <Button
                                    Cursor="Hand"
                                    HorizontalAlignment="Right"
                                    Grid.Column="1"
                                    Width="15"
                                    Height="15"
                                    Style="{DynamicResource ChromelessButtonStyle}"
                                    Command="{Binding Path=CancelCommand}">
                                    <Path 
                                        Stretch="Fill" 
                                        Fill="#FF30B0F0" 
                                        Data="F1 M 26.9166,22.1667L 37.9999,33.25L 49.0832,22.1668L 53.8332,26.9168L 42.7499,38L 53.8332,49.0834L 49.0833,53.8334L 37.9999,42.75L 26.9166,53.8334L 22.1666,49.0833L 33.25,38L 22.1667,26.9167L 26.9166,22.1667 Z"/>
                                    <Button.ToolTip>
                                        <TextBlock>Cancel</TextBlock>
                                    </Button.ToolTip>
                                </Button>
                            </DockPanel>
                            <ProgressBar
                                Grid.Row="1"
                                Height="6"
			                    VerticalAlignment="Bottom"
                                HorizontalAlignment="Stretch"
			                    Value="{Binding Path=ByteProgress}"
                                Maximum="{Binding Path=ByteProgressMax}"
                                Background="#FF021F3A"
                                BorderThickness="0">
                                <ProgressBar.Foreground>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#FF0080C0" Offset="1"/>
                                        <GradientStop Color="#FF30B0F0"/>
                                    </LinearGradientBrush>
                                </ProgressBar.Foreground>
                                <ProgressBar.Style>
                                    <Style TargetType="{x:Type ProgressBar}">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.Uninstalling}">
                                                <Setter Property="Visibility" Value="Visible"/>
                                                <Setter Property="IsIndeterminate" Value="True"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.FilesIntegrityChecking}">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.Downloading}">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding Path=Model.ProcessingPhase}" Value="{x:Static core:GameProcessingPhase.Decompressing}">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </ProgressBar.Style>
                            </ProgressBar>
                        </Grid>
                    </Grid>
                </DataTemplate>
            </local:GameInstallStatusTemplateSelector.InstalledTemplate>
        </local:GameInstallStatusTemplateSelector>
    </metroControls:MetroWindow.Resources>

    <metroControls:MetroWindow.WindowTitleBrush>
        <ImageBrush ImageSource="../../Resources/head_line.png"/>
    </metroControls:MetroWindow.WindowTitleBrush>

    <metroControls:MetroWindow.NonActiveWindowTitleBrush>
        <ImageBrush ImageSource="../../Resources/head_line_disabled.png"/>
    </metroControls:MetroWindow.NonActiveWindowTitleBrush>

    <metroControls:MetroWindow.Background>
        <VisualBrush Stretch="{Binding Path=BackgroundStretch}">
            <VisualBrush.Visual>
                <Grid>
                    <Image
                        Source="{Binding Path=PreveiewBackgroundImageSource, UpdateSourceTrigger=PropertyChanged, NotifyOnTargetUpdated=True}">
                        <Image.Triggers>
                            <EventTrigger RoutedEvent="Binding.TargetUpdated">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation
                                            Storyboard.TargetProperty="Opacity"
                                            From="1" 
                                            To="0"
                                            Duration="0:0:0.5" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Image.Triggers>
                    </Image>
                    <Image 
                        Source="{Binding Path=BackgroundImageSource, UpdateSourceTrigger=PropertyChanged, NotifyOnTargetUpdated=True}">
                        <Image.Triggers>
                            <EventTrigger RoutedEvent="Binding.TargetUpdated">
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation
                                            Storyboard.TargetProperty="Opacity"                             
                                            From="0" 
                                            To="1" 
                                            Duration="0:0:0.5" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Image.Triggers>
                    </Image>
                </Grid>
            </VisualBrush.Visual>
        </VisualBrush>
    </metroControls:MetroWindow.Background>
    <metroControls:MetroWindow.RightWindowCommands>
        <metroControls:WindowCommands ShowSeparators="False">
            <metroControls:DropDownButton
                ItemsSource="{Binding Path=AdditionalActions}"
                VerticalContentAlignment="Center"
                FontFamily="/ToadmanLauncher;component/Resources/#Comfortaa"
                Foreground="#FFC9C9C9"
                Cursor="Hand"
                BorderThickness="0"
                ArrowVisibility="Collapsed">
                <metroControls:DropDownButton.Style>
                    <Style TargetType="metroControls:DropDownButton">
                        <Setter Property="BorderBrush" Value="Transparent" />
                        <Setter Property="Background" Value="#2FFFFFFF" />
                    </Style>
                </metroControls:DropDownButton.Style>

                <metroControls:DropDownButton.ButtonStyle>
                    <Style TargetType="{x:Type Button}" BasedOn="{StaticResource CustomDropDownButtonStyle}" />
                </metroControls:DropDownButton.ButtonStyle>

                <metroControls:DropDownButton.Icon>
                    <StackPanel 
                            Margin="10,0"
	                        VerticalAlignment="Center"
	                        Orientation="Horizontal">
                        <Image 
		                        Stretch="None" 
		                        Source="../../Resources/user_icon.png"
		                        Margin="0,0,4,0"/>
                        <TextBlock 
                                VerticalAlignment="Center"
                                TextAlignment="Center"
                                FontSize="12"
                                FontFamily="/ToadmanLauncher;component/Resources/#Comfortaa"
		                        Text="{Binding Path=CurrentUserName}"
		                        Foreground="White"/>
                    </StackPanel>
                </metroControls:DropDownButton.Icon>
            </metroControls:DropDownButton>
        </metroControls:WindowCommands>
    </metroControls:MetroWindow.RightWindowCommands>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="26"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="200"/>
        </Grid.RowDefinitions>

        <!--Errors-->
        <ItemsControl
            Grid.Column="1"
            Grid.ColumnSpan="2"
            Grid.Row="0"
            ItemsSource="{Binding Path=Errors}"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Center">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Border BorderBrush="#FFA21212" BorderThickness="0,0,0,1" Background="Firebrick" Padding="0,3">
                        <StackPanel Orientation="Horizontal">
                            <Viewbox Width="14" Height="14" Margin="5,3,5,5">
                                <Path 
                                    Fill="Ivory"
                                    Data="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z" />
                            </Viewbox>
                            <TextBlock
                                FontSize="12"
                                Text="{Binding Path=MessageText}" 
                                Foreground="Ivory" VerticalAlignment="Center" FontFamily="/ToadmanLauncher;component/Resources/#Comfortaa" />
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <Button
            Visibility="{Binding Path=HasUpdate, Converter={StaticResource BoolToVisibilityConverter}}"   
            Command="{Binding Path=AppUpdateCommand}"
            Grid.Row="1"
            Grid.Column="2"
            FontSize="12"
            HorizontalAlignment="Right"
            VerticalAlignment="Center"
            Foreground="Ivory"
            Style="{DynamicResource BlueButtonStyle}">
            <TextBlock Margin="10,2">
                Launcher update is available. Click to install
            </TextBlock>
        </Button>

        <!--SideBat-->
        <Border
            Visibility="{Binding Path=IsGameLoad, Converter={StaticResource BoolToVisibilityConverter}}"
            Grid.Row="0"
            Grid.ColumnSpan="2"
            Grid.RowSpan="4">
            <Border.Background>
                <ImageBrush ImageSource="/ToadmanLauncher;component/Resources/sidebar.png"/>
            </Border.Background>
            
            <ListBox 
                x:Name="GameLibrary"
                HorizontalAlignment="Left"
                Width="100"
                BorderThickness="0" 
                Background="Transparent"
                SelectedItem="{Binding Path=SelectedGame}"
                ItemsSource="{Binding Path=Games}">
                
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel
                            Margin="0,8"
                            HorizontalAlignment="Center"
                            Orientation="Vertical">
                            <Image
                                Width="75"
                                Height="75"
                                Stretch="Fill"
                                Source="{Binding Path=IconMenuImageSource}"/>
                            <TextBlock
                                TextWrapping="Wrap"
                                TextAlignment="Center"
                                HorizontalAlignment="Center"
                                Width="75"
                                Margin="0,5"
                                FontSize="12"
                                Foreground="WhiteSmoke"
                                FontWeight="Normal"
                                Text="{Binding Path=Model.Title}" FontFamily="Segoe UI Semibold"/>
                        </StackPanel>
                    
                    
                    </DataTemplate>
                </ListBox.ItemTemplate>
                <ListBox.ItemContainerStyle>
                    <Style TargetType="{x:Type ListBoxItem}">
                        <Setter Property="Background" Value="Transparent" />
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                    <Grid Background="{TemplateBinding Background}" RenderOptions.ClearTypeHint="{TemplateBinding RenderOptions.ClearTypeHint}">
                                        <Grid Margin="{TemplateBinding BorderThickness}">
                                            <ContentPresenter 
                                                ContentTemplate="{TemplateBinding ContentTemplate}" 
                                                Content="{TemplateBinding Content}" 
                                                ContentStringFormat="{TemplateBinding ContentStringFormat}" 
                                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                Margin="{TemplateBinding Padding}" 
                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                        </Grid>
                                    </Grid>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Background">
                                                <Setter.Value>
                                                    <ImageBrush ImageSource="/ToadmanLauncher;component/Resources/select_game.png"/>
                                                </Setter.Value>
                                            </Setter>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListBox.ItemContainerStyle>
            </ListBox>
        </Border>

        <!--Footer-->
        <Border 
            Visibility="{Binding Path=IsGameLoad, Converter={StaticResource BoolToVisibilityConverter}}"
            Grid.Column="1" 
            Grid.Row="3"
            Grid.ColumnSpan="2"
            Padding="10">
            <Border.Background>
                <ImageBrush ImageSource="/ToadmanLauncher;component/Resources/footer.png"/>
            </Border.Background>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="250"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="50"/>
                </Grid.RowDefinitions>

                <ContentControl 
                    Grid.ColumnSpan="2"
                    Grid.RowSpan="2"
                    Content="{Binding Path=SelectedGame}"  
                    ContentTemplateSelector="{StaticResource GameInstallStatusTemplateSelector}" 
                    HorizontalAlignment="Stretch" 
                    VerticalAlignment="Stretch"
                    IsTabStop="False">
                </ContentControl>

                <ScrollViewer Margin="0,0,10,0" HorizontalAlignment="Stretch" VerticalScrollBarVisibility="Auto">
                    <TextBlock 
		                FontSize="12" 
                        LineHeight="20"
		                TextWrapping="Wrap"
		                HorizontalAlignment="Stretch"
		                Foreground="White"
		                Text="{Binding Path=SelectedGame.Model.Description}"/>
                </ScrollViewer>

                <Button 
                    Grid.Row="1"
                    Grid.Column="1"
                    Command="{Binding Path=GoToDiscordCommand}"
                    Visibility="{Binding Path=SelectedGame.Model.DiscordUrl, Converter={StaticResource ValueToVisibilityConverter}}"
                    VerticalAlignment="Bottom"
                    HorizontalAlignment="Right"
                    Style="{StaticResource DiscordButtonStyle}"/>
            </Grid>
        </Border>

        <metroControls:ProgressRing
            Grid.Row="2"
            Grid.ColumnSpan="3"
            VerticalAlignment="Bottom"
            IsActive="{Binding Path=IsWaiting}"
            Foreground="#FFD9D9DA"/>
    </Grid>
</metroControls:MetroWindow>